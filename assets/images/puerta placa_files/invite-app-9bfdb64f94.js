"use strict";var UserRoles;!function(e){e[e.ROLE_NONE=0]="ROLE_NONE",e[e.ROLE_VIEWER=1]="ROLE_VIEWER",e[e.ROLE_USER=2]="ROLE_USER",e[e.ROLE_USER_GROUP_MANAGER=3]="ROLE_USER_GROUP_MANAGER",e[e.ROLE_ADMIN=4]="ROLE_ADMIN",e[e.ROLE_SUPER_ADMIN=5]="ROLE_SUPER_ADMIN",e[e.ROLE_TOP=6]="ROLE_TOP"}(UserRoles||(UserRoles={}));var OPERATORS;!function(e){e.HAS_VALUE="hasValue",e.REGEX="regex"}(OPERATORS||(OPERATORS={}));var FormComponents;!function(e){e.TEXT_INPUT="textInput",e.TEXT_AREA="textArea",e.EMAIL_INPUT="emailInput",e.NPS="nps",e.GRADING1TO5="grading",e.GRADING1TO10="grading1to10",e.GRADING0TO10="grading0to10",e.RADIO="radio",e.CHECKBOX="checkbox",e.SELECT="select",e.LABEL="label",e.IMAGE="image",e.SECTION_BREAK="sectionBreak"}(FormComponents||(FormComponents={}));var DigFeatures;!function(e){e.INCREASED_FEEDBACK_POLLING_TIME="increasedFeedbackPollingTime"}(DigFeatures||(DigFeatures={}));var eventTypes;!function(e){e.MOUSE_OVER="mouseover",e.MOUSE_LEAVE="mouseleave",e.CLICK="click",e.KEYDOWN="keydown"}(eventTypes||(eventTypes={}));var RatingViewTypes;!function(e){e.SQUARES="numbersSquare",e.SLIDER="gradingSlider",e.CIRCLES="numbersCircle"}(RatingViewTypes||(RatingViewTypes={}));var DigProvisions;!function(e){e.RESPONSIVE_RATING_COMPONENT="responsiveRatingComponent",e.FORM_SPACING="formSpacing",e.FORM_WCAG="formTemplatesWCAG",e.ON_PREM_HYBRID="onPremHybrid",e.SEPARATE_FORM_TEMPLATE_FROM_DATA="separateFormTemplateFromData",e.MULTI_OPTIONS_ID="multiOptionsID",e.LOCALIZED_FORMS="localizedForms",e.INTEGRATION_SET_EC_FIELDS="integrationSetECFields",e.CUSTOM_PARAMS_PERF_FIX="CustomParamPerfFix",e.EVENT_INCLUDE_FEEDBACK_CONTENT="eventIncludeFeedbackContent",e.GDPR_DO_NOT_STORE_IP="GDPRDoNotStoreIP",e.MOBILE_INVITATION_LAYOUT="mobileInvitationLayout",e.MOBILE_WEB_DYNAMIC_FORM_SIZE="mobileWebDynamicFormSizeInFormBuilder",e.PREVIEW_FROM_S3="previewFromS3",e.MOBILE_SDKV2_PARTIAL_VIEW="mobileSDKV2PartialView",e.MOBILE_SDKV2_BANNER="mobileSDKV2Banner",e.MOBILE_SDKV2_PUSH_NOTIFICATION="mobileSDKV2PushNotification",e.MOBILE_SDKV2_BANNER_REVAMP="mobileSDKV2BannerRevamp",e.MOBILE_SDKV2_INVITATION_TYPE="mobileSDKV2InvitationType",e.MOBILE_SDKV2_APP_RATING="mobileSDKV2AppRating",e.CUSTOM_HTML_FORMS_ENABLE="customHtmlFormsEnable",e.MOBILE_SDKV2_DIALOG_SHOW_CUSTOM_PARAMETER_ORG_NAME="mobileSDKV2DialogShowCustomParameterOrgName",e.MOBILE_SDKV2_TABLE_HIDE_CUSTOM_PARAMETER_ORG_NAME="mobileSDKV2TableHideCustomParameterOrgName",e.MOBILE_SDKV2_UI_REVAMP="mobileSDKV2UiRevamp",e.MOBILE_SDKV2_FORM_WCAG_SUPPORT="mobileSDKV2FormWCAGSupport",e.MOBILE_SDKV2_NEW_ANDROID_BUTTON="mobileSDKV2AndroidNewSubmitButton",e.IMAGE_PREVIEW="imagePreview",e.CUSTOM_CSS_UPLOAD="customCssUpload",e.UNIFIED_PRODUCT_MENU_WITH_MEC="NewUPMenuWithMEC",e.DIG_UPLOEADER_UI="digUploaderUI",e.FORM_FOLDERS="formFolders",e.NEW_FORM_DESIGN_UI="newFormDesignUI",e.DISABLE_INTERCEPT_RULE="enableInterceptDisableRule",e.ADD_SELF_HOSTED_POPUP="addSelfHostedPopUp",e.MDEC_FORM_INTEGRATION="MDECFormIntegration",e.DISABLE_FORM_DUPLICATION="disableFormDuplication",e.NATIVE_SCREEN_CAPTURE="nativeScreenCapture",e.UNIQUE_PREVIEW_LINK="uniquePreviewLink",e.ALTERNATIVE_UUID="alternativeUUID"}(DigProvisions||(DigProvisions={}));var DigEventNames;!function(e){e.SCROLL_TO_TOP="scrollToTop"}(DigEventNames||(DigEventNames={}));var FormFieldRoleTypes;!function(e){e.CSAT="CSAT",e.CATEGORY="category",e.CONTACT_EMAIL="contactEmail",e.CONTACT_NAME="contactName"}(FormFieldRoleTypes||(FormFieldRoleTypes={}));var LiveFormMessageIds;!function(e){e.FEEDBACK_UUID_IS_NULL="feedbackUUIDisNull",e.SUBMIT_FEEDBACK_FAILED="submitFeedbackFailed"}(LiveFormMessageIds||(LiveFormMessageIds={}));var FormButtons;!function(e){e.CLOSE="Close",e.NEXT="Next",e.BACK="Back",e.SUBMIT="Submit"}(FormButtons||(FormButtons={}));var FormTriggerTypes;!function(e){e.EMBEDDED=".EmbeddedContract",e.CODE=".CodeContract",e.BUTTON=".ButtonContract",e.INVITE=".InvitationContract",e.MOBILE=".MobileInvitationContract"}(FormTriggerTypes||(FormTriggerTypes={}));var FormTriggerTypesLabels;!function(e){e.INVITE="Invite",e.BUTTON="Button",e.CODE="Code",e.EMBEDDED="Embedded"}(FormTriggerTypesLabels||(FormTriggerTypesLabels={}));var ResultCode;!function(e){e.SUCCESS="SUCCESS"}(ResultCode||(ResultCode={}));var DigHttpRequestTypes;!function(e){e.GET="GET",e.POST="POST",e.DELETE="DELETE"}(DigHttpRequestTypes||(DigHttpRequestTypes={}));var DigLiveFormEvents;!function(e){e.FORM_NEXT_PAGE="MDigital_Form_Next_Page",e.FORM_BACK_PAGE="MDigital_Form_Back_Page",e.FORM_CLOSE_NO_SUBMIT="MDigital_Form_Close_No_Submit",e.FORM_CLOSE_SUBMIT="MDigital_Form_Close_Submitted",e.THANK_YOU_CLOSE="MDigital_ThankYou_Close",e.THANK_YOU_DISPLAYED="MDigital_ThankYou_Displayed"}(DigLiveFormEvents||(DigLiveFormEvents={}));var EngagementTypes;!function(e){e.Form="Form",e.AppRating="AppRating"}(EngagementTypes||(EngagementTypes={}));var MobileVersion;!function(e){e[e.MOBILE_SEND_FEEDBACK_MIN_VERSION=2.14]="MOBILE_SEND_FEEDBACK_MIN_VERSION"}(MobileVersion||(MobileVersion={}));var DigFormDisplayTypes;!function(e){e.LIGHTBOX="lightbox",e.EMBEDDED="embedded",e.ANIMATION="animation",e.POPUP="popup"}(DigFormDisplayTypes||(DigFormDisplayTypes={}));var FormAdvanceSettings;!function(e){e.REQUIRED_ERROR_MSG="This Field is Required.",e.EMAIL_VALIDATION_ERROR_MSG="A valid email address is required. For example: 'name@example.com'",e.URL_VALIDATION_ERROR_MSG="A valid URL address is required. For example: 'www.google.com'"}(FormAdvanceSettings||(FormAdvanceSettings={}));var DigSortOrder;!function(e){e.ASCENDING="asc",e.DESCENDING="desc"}(DigSortOrder||(DigSortOrder={}));var DigClassNamePrefix;!function(e){e.FORM_LANGUAGE="dig-form-language-"}(DigClassNamePrefix||(DigClassNamePrefix={}));var MobileInvitationType;!function(e){e.BANNER="BANNER",e.PUSH_NOTIFICATION="PUSH_NOTIFICATION",e.ALERT="ALERT"}(MobileInvitationType||(MobileInvitationType={}));var MobileInvitationPosition;!function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM"}(MobileInvitationPosition||(MobileInvitationPosition={}));var DigColors;!function(e){e.INVITAION_TEXT="#40404a"}(DigColors||(DigColors={}));var DigScreenCapture;!function(e){e.BUTTON_DISABLED="Feedback Screen Capture Button Disabled",e.BUTTON="Feedback Screen Capture Button"}(DigScreenCapture||(DigScreenCapture={}));var FormViewTypes;!function(e){e.LIST="list",e.GRID="grid"}(FormViewTypes||(FormViewTypes={}));var PollingIntervals;!function(e){e[e.UNREAD_FEEDBACKS=3e4]="UNREAD_FEEDBACKS"}(PollingIntervals||(PollingIntervals={}));var ON_PREM;!function(e){e.PREVIEW_PACKAGE_VERSION="[Preview]"}(ON_PREM||(ON_PREM={}));var MobileFormDisplayType;!function(e){e.FULL="full",e.PARTIAL="modal"}(MobileFormDisplayType||(MobileFormDisplayType={}));var DISPLAY_MODE;!function(e){e.PREVIEW="Preview",e.LIVE="live"}(DISPLAY_MODE||(DISPLAY_MODE={}));var FORM_BACKGROUND_IMAGE_POSITION;!function(e){e.CENTER="Center",e.REPEAT="Tile",e.COVER="Fill to screen"}(FORM_BACKGROUND_IMAGE_POSITION||(FORM_BACKGROUND_IMAGE_POSITION={}));var FORM_BACKGROUND_IMAGE_POSITION_FIELDS;!function(e){e.REPEAT="doReapet",e.COVER="doCover"}(FORM_BACKGROUND_IMAGE_POSITION_FIELDS||(FORM_BACKGROUND_IMAGE_POSITION_FIELDS={}));var PAGES_KEYS;!function(e){e.DASHBOARD="app.pages.dashboard",e.FORMS="app.pages.forms",e.EXPERIENCE_OPTIMIZER="app.pages.experienceOptimizer.googleAnalytics",e.INBOX="app.pages.messages",e.REPORTS_FEEDBACK_ACTIVITY="app.pages.reports.feedbackActivity",e.REPORTS_FEEDBACK_NPS="app.pages.reports.nps",e.REPORTS_FEEDBACK_GRADING="app.pages.reports.rating",e.REPORTS_FEEDBACK_DEVICE="app.pages.reports.device",e.REPORTS_FEEDBACK_WORD_CLOUD="app.pages.reports.wordCloud",e.REPORTS_FEEDBACK_FORM_ANALYSIS="app.pages.reports.formAnalysis",e.REPORTS_FEEDBACK_SCHEDULED="app.pages.reports.scheduled"}(PAGES_KEYS||(PAGES_KEYS={}));var NOTIFICATION_TYPES;!function(e){e.SUCCESS="success",e.FAILURE="failure"}(NOTIFICATION_TYPES||(NOTIFICATION_TYPES={}));var JOB_TYPES;!function(e){e.DELETE="DELETE"}(JOB_TYPES||(JOB_TYPES={}));var FOLDER_ACTIONS;!function(e){e.DELETE="Delete",e.RENAME="Rename",e.MOVE="Move"}(FOLDER_ACTIONS||(FOLDER_ACTIONS={}));var REQUEST_HEADERS;!function(e){e.X_MD_REQ_ID="X-MD-REQ-ID"}(REQUEST_HEADERS||(REQUEST_HEADERS={}));var DEVICE_TYPES;!function(e){e.TABLET="tablet",e.MOBILE="mobile"}(DEVICE_TYPES||(DEVICE_TYPES={}));var KAMPYLE_POLYFILLS=function(e,t){Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){function n(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),r=i.length>>>0;if(0===r)return!1;for(var o=0|t,a=Math.max(o>=0?o:r-Math.abs(o),0);a<r;){if(n(i[a],e))return!0;a++}return!1}}),String.prototype.includes||(String.prototype.includes=function(e,t){return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&this.indexOf(e,t)!==-1}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],r=0;r<n;){var o=t[r];if(e.call(i,o,r,t))return o;r++}}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),r=i.length>>>0;if(0===r)return-1;var o=+t||0;if(Math.abs(o)===1/0&&(o=0),o>=r)return-1;for(n=Math.max(o>=0?o:r-Math.abs(o),0);n<r;){if(n in i&&i[n]===e)return n;n++}return-1}),Array.prototype.filter||(Array.prototype.filter=function(e){if(void 0===this||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var i=[],r=arguments.length>=2?arguments[1]:void 0,o=0;o<n;o++)if(o in t){var a=t[o];e.call(r,a,o,t)&&i.push(a)}return i}),Array.prototype.forEach||(Array.prototype.forEach=function(e){var t,n;if(null==this)throw new TypeError("this is null or not defined");var i=Object(this),r=i.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(t=arguments[1]),n=0;n<r;){var o;n in i&&(o=i[n],e.call(t,o,n,i)),n++}}),Date.now||(Date.now=function(){return(new Date).getTime()}),"function"!=typeof Object.assign&&!function(){Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i)for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t}}(),Array.prototype.some||(Array.prototype.some=function(e){if(null==this)throw new TypeError("Array.prototype.some called on null or undefined");if("function"!=typeof e)throw new TypeError;for(var t=Object(this),n=t.length>>>0,i=arguments.length>=2?arguments[1]:void 0,r=0;r<n;r++)if(r in t&&e.call(i,t[r],r,t))return!0;return!1}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],r=0;r<n;){var o=t[r];if(e.call(i,o,r,t))return r;r++}return-1}}),Array.prototype.every||(Array.prototype.every=function(e,t){var n,i;if(null==this)throw new TypeError("this is null or not defined");var r=Object(this),o=r.length>>>0;if("function"!=typeof e)throw new TypeError;for(arguments.length>1&&(n=t),i=0;i<o;){var a;if(i in r){a=r[i];var s=e.call(n,a,i,r);if(!s)return!1}i++}return!0}),Array.prototype.reduce||Object.defineProperty(Array.prototype,"reduce",{value:function(e){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var t,n=Object(this),i=n.length>>>0,r=0;if(arguments.length>=2)t=arguments[1];else{for(;r<i&&!(r in n);)r++;if(r>=i)throw new TypeError("Reduce of empty array with no initial value");t=n[r++]}for(;r<i;)r in n&&(t=e(t,n[r],r,n)),r++;return t}}),function(){function n(e,n){n=n||{bubbles:!1,cancelable:!1,detail:void 0};var i=t.createEvent("CustomEvent");return i.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),i}return"function"!=typeof e.CustomEvent&&(n.prototype=e.Event.prototype,void(e.CustomEvent=n))}()}(window,document),KAMPYLE_UTILS={isIos:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},triggerCustomEvent:function(e,t){t=t||{};var n=new CustomEvent(e,t);window.dispatchEvent(n)},createFormUrl:function(e,t){e+="?formId="+t,e+="&type=live";var n=window.location.href,i=n.split("?");i&&i.length&&(n=i[0]),e+="&referrer="+encodeURIComponent(n);var r=KAMPYLE_DATA.getMemoryData("region");return r&&(e+="&region="+r),KAMPYLE_DATA.isFeatureEnabled("WCAG")&&(e+="&isWCAG=true"),e},isDebugMode:function(){var e=KAMPYLE_DATA.getMemoryData("region");return"dev"===e||"qa"===e},showErrorStack:function(e){KAMPYLE_UTILS.isDebugMode()&&console.warn(e.stack)},showWarning:function(e){KAMPYLE_UTILS.isDebugMode()&&console.warn(e)},addStyle:function(e,t){t=t||window.document;var n=t.getElementById("kampyleStyle");if(null===n){n=t.createElement("style"),n.type="text/css",n.id="kampyleStyle";var i=t.head||t.getElementsByTagName("head")[0];i.appendChild(n)}n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(document.createTextNode(e))},getViewportSize:function(){return{width:Math.max(document.documentElement.clientWidth,window.innerWidth||0),height:Math.max(document.documentElement.clientHeight,window.innerHeight||0)}},getDocumentSize:function(){var e=document.body,t=document.documentElement,n=Math.max(e.scrollHeight||0,e.offsetHeight||0,t.clientHeight||0,t.scrollHeight||0,t.offsetHeight||0),i=Math.max(e.scrollWidth||0,t.scrollWidth||0,e.offsetWidth||0,t.offsetWidth||0,t.clientWidth||0);return{width:i+(e.getBoundingClientRect?e.getBoundingClientRect().left||0:0),height:n+(e.getBoundingClientRect?e.getBoundingClientRect().top||0:0)}},getTimeDiff:function(e,t){var n="undefined"!=typeof e?e:"2014-01-01 01:02:03.123456";n=new Date(n).getTime();var i=Date.now();if(isNaN(n))return"";var r=0;switch(r=n<i?i-n:n-i,t){case KAMPYLE_CONSTANT.TIME_FORMATS.SECONDS:return r.toFixed(1)/1e3;case KAMPYLE_CONSTANT.TIME_FORMATS.DAYS:return Math.floor(r/1e3/60/60/24);default:return r}},setEventHandler:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},removeEventHandler:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n):e.detachEvent&&e.detachEvent("on"+t,n)},setElementStyle:function(e,t,n){var i,r;if(n=n?"important":"",e)for(i in t)if(t.hasOwnProperty(i))if(n&&e&&e.style.setProperty){r=KAMPYLE_UTILS.camelToDash(i);try{e.style.setProperty(r,""+t[i],n)}catch(o){e.style.setProperty(r,""+t[i],"!"+n)}}else e.style[i]=t[i]},isNear:function(e,t,n){var i=document.getElementById(e);if(!i)return!1;var r=KAMPYLE_UTILS.offset(i).left-t,o=KAMPYLE_UTILS.offset(i).top-t,a=r+i.clientWidth+2*t,s=o+i.clientHeight+2*t,l=n.pageX,c=n.pageY;return l>r&&l<a&&c>o&&c<s},offset:function(e){if(!e)return!1;var t=e.getBoundingClientRect(),n=document.body;return{top:+t.top+n.scrollTop,left:t.left+n.scrollLeft}},createIframe:function(e,t,n,i){var r=document.createElement("iframe");return r.width=t,r.height=n,r.src=e,r.id=i,r.style.border=0,r.frameBorder=0,r.style.display="inline-block",r},getUrlParam:function(e){var t=location.search.substr(location.search.indexOf("?")+1);""===t&&(t=location.hash.substr(location.hash.indexOf("?")+1));var n="";t=t.split("&");for(var i=t.length,r=0;r<i;r++){var o=t[r].split("=");o&&[o[0]]==e&&(n=o[1])}return n},htmlDecode:function(e){e=e||"";var t;return t=new RegExp("&lt","g"),e=e.replace(t,"<"),t=new RegExp("&gt","g"),e=e.replace(t,">")},escapeRegExp:function(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")},replaceAll:function(e,t,n){return e.replace(new RegExp(KAMPYLE_UTILS.escapeRegExp(t),"g"),n)},sendMessageToIframe:function(e,t){var n,i,r;if(e&&(r=document.getElementById(e),r&&r.getAttribute)){var n=r.getAttribute("origin")||"*",i=r.contentWindow;i&&i.postMessage&&i.postMessage(JSON.stringify(t),n)}},getBrowser:function(){var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(n[1]))return e=/\brv[ :]+(\d+)/g.exec(t)||[],{name:"IE",version:e[1]||""};if("Chrome"===n[1]&&(e=t.match(/\b(OPR|Edge)\/(\d+)/),null!=e)){var i=e.slice(1);return{name:i[0].replace("OPR","Opera"),version:i[1]||""}}return n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),{name:n[0],version:n[1]}},initEventSubscriptions:function(e,t){for(var n in e)e.hasOwnProperty(n)&&KAMPYLE_EVENT_DISPATCHER.subscribe(n,t)},kampyleGetUserId:function(){var e=KAMPYLE_DATA.getData("kampyle_userid");return e||(e=KAMPYLE_UTILS.kampyleCreateUUID(),KAMPYLE_DATA.setData("kampyle_userid",e)),e},kampyleCreateUUID:function(){for(var e=8,t=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},n=t(),i=0;i<e-1;i++)n+="-"+t();return n},removeAllContent:function(e){if(e){for(;e.firstChild;)e.removeChild(e.firstChild);e.parentNode.removeChild(e)}},safeToLower:function(e){return"string"!=typeof e?e:e.toLowerCase()},kampyleSetCookie:function(e,t,n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);var r="expires="+i.toUTCString();document.cookie=e+"="+t+"; "+r+";path=/"},getCookie:function(e){this.name=e+"=",this.ca=document.cookie.split(";");for(var t=0;t<this.ca.length;t++){for(this.c=this.ca[t];" "===this.c.charAt(0);)this.c=this.c.substring(1);if(0===this.c.indexOf(this.name)){var n=this.c.substring(this.name.length,this.c.length);return n}}return null},kampyleGetCookie:function(e){this.name=e+"=",this.ca=document.cookie.split(";");for(var t=0;t<this.ca.length;t++){for(this.c=this.ca[t];" "===this.c.charAt(0);)this.c=this.c.substring(1);if(0===this.c.indexOf(this.name))return this.c.substring(this.name.length,this.c.length)}return""},getByteSize:function(e){return encodeURIComponent("<q></q>"+e).length},getAllKampyleData:function(){for(var e=["SUBMITTED_DATE","kampyleUserPercentile","kampyleUserSession","kampyle_userid","kampyleInvitePresented","DECLINED_DATE","LAST_INVITATION_VIEW"],t={},n=e.length-1;n>=0;n--)t[e[n]]=KAMPYLE_DATA.getData(e[n]);return t},kampyleDeleteCookie:function(e){var t="expires=Thu, 01 Jan 1970 00:00:00 UTC";document.cookie=e+"= ; "+t+"; path=/"},kampyleIsCookieEnabled:function(){return navigator.cookieEnabled},kampyleCompareTimestamps:function(e,t,n){if("number"!=typeof e||"number"!=typeof t)return!1;switch(e=new Date(e),t=new Date(t),e.setHours(0,0,0,0),n){case"equals":return t.setHours(0,0,0,0),e.getTime()===t.getTime();case"laterthan":return t.setHours(23,59,59,999),e>t;case"earlierthan":return t.setHours(0,0,0,0),e<t;case"doesnotequal":return t.setHours(0,0,0,0),e.getTime()!==t.getTime();default:return!1}},kampyleCompareByOperator:function(e,t,n,i){i=KAMPYLE_UTILS.safeToLower(i);var r=!1;if(void 0===e)return r;switch(n=KAMPYLE_UTILS.safeToLower(n)){case"equals":r="datetime"===i?KAMPYLE_UTILS.kampyleCompareTimestamps(e,t,n):e===t;break;case"doesnotequal":r="datetime"===i?KAMPYLE_UTILS.kampyleCompareTimestamps(e,t,n):e!==t;break;case"greaterthan":r=e>t;break;case"laterthan":r="datetime"===i?KAMPYLE_UTILS.kampyleCompareTimestamps(e,t,n):e>t;break;case"smallerthan":r=e<t;break;case"earlierthan":r="datetime"===i?KAMPYLE_UTILS.kampyleCompareTimestamps(e,t,n):e>t;break;case"contains":r=!!e&&e.indexOf&&e.indexOf(t)!==-1;break;case"doesnotcontain":r=!!e&&e.indexOf&&e.indexOf(t)===-1;break;case"startswith":r=!!e&&e.indexOf&&0===e.indexOf(t);break;case"endswith":r=!!e&&e.indexOf&&e.length&&e.indexOf(t,e.length-e.length)!==-1;break;case"hasvalue":r=!!e||""===e||e===!1||0===e}return r},setNestedPropertyValue:function(e,t,n){for(var i=e,r=t.split("."),o=r.length,a=0;a<o-1;a++){var s=r[a];i[s]||(i[s]={}),i=i[s]}i[r[o-1]]=n},getNestedPropertyValue:function(e,t){if(!e||!t)return null;for(var n=t.split("."),i=e,r=n.length,o=0;o<r;o++){if(!i||!i.hasOwnProperty(n[o])&&!i[n[o]])return null;i=i[n[o]]}return i},validateKampyleDomain:function(e){var t=/(^https?:\/\/[A-Za-z0-9\-]+\.kampyle\.com(\/[A-Za-z0-9\-\._~:\/\?#\[\]@!$&'\(\)\*\+,;\=]*)?)/,n=t.test(e);return n||console.warn("Invalid url in validateKampyleDomain: "+e),n},camelToDash:function(e){return"string"!=typeof e?e:e.replace(/\W+/g,"-").replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase()},objectPropertyObserver:function(e,t,n){function i(){var s=KAMPYLE_UTILS.getNestedPropertyValue(e,t);return s&&n instanceof Function?n(s):void(a++<r&&window.setTimeout(i,o))}var r=100,o=100,a=0;window.setTimeout(i,o)},showInvite:function(){var e=document.getElementById("kampyleInvite");KAMPYLE_UTILS.setElementStyle(e,{visibility:"visible"},!0)},hideInvite:function(){var e=document.getElementById("kampyleInvite");KAMPYLE_UTILS.setElementStyle(e,{visibility:"hidden"},!0)},getNumericValue:function(e){return""===e||null===e?null:"number"!=typeof e&&isNaN(Number(e))?null:Number(e)},httpGetRequest:function(e,t,n,i){function r(){KAMPYLE_EVENT_DISPATCHER.trigger("neb_beforeHttpGetRequest");var a=new XMLHttpRequest;a.open("GET",e,!0),a.timeout=n||0,a.onerror=function(){KAMPYLE_EVENT_DISPATCHER.trigger("neb_afterHttpGetRequestOnError"),"function"==typeof i&&i()},a.ontimeout=function(){if(o<t)o++,r();else{if(KAMPYLE_EVENT_DISPATCHER.trigger("neb_afterHttpGetRequestOnTimeout"),"function"!=typeof i)return;i()}},a.onload=function(){if(200===a.status){var e=JSON.parse(a.responseText);if(KAMPYLE_EVENT_DISPATCHER.trigger("neb_afterHttpGetRequest",{dataFromNode:Object.assign({},e)}),"function"!=typeof i)return;i(null,e)}else if(o<t)o++,r();else{if(KAMPYLE_EVENT_DISPATCHER.trigger("neb_afterHttpGetRequest",{dataFromNode:a.status}),"function"!=typeof i)return;i(a.status)}},a.send()}var o=0;r()},httpPostRequest:function(e,t,n){var i={postData:Object.assign({},t)};KAMPYLE_EVENT_DISPATCHER.trigger("neb_beforeHttpPostRequest",i);var r=new XMLHttpRequest;r.open("POST",e),r.setRequestHeader("Content-Type","application/json"),r.onerror=function(){KAMPYLE_EVENT_DISPATCHER.trigger("neb_afterHttpPostRequestOnError",{postData:r.status}),"function"==typeof n&&n()},r.onload=function(){if(200===r.status){if(KAMPYLE_EVENT_DISPATCHER.trigger("neb_afterHttpPostRequest",i),"function"!=typeof n)return;n(null,data)}else{if(KAMPYLE_EVENT_DISPATCHER.trigger("neb_afterHttpPostRequest",{postData:r.status}),"function"!=typeof n)return;n(r.status)}},r.send(JSON.stringify(t))},lowerize:function(e){return e.toLowerCase()},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},getDeviceTypeByUserAgent:function(e){for(var t,n,i,r,o,a,s="function",l="model",c="object",u="type",d="vendor",p="mobile",f="tablet",m="smarttv",v="desktop",g={},E=[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[l,d,[u,f]],[/applecoremedia\/[\w\.]+ \((ipad)/],[l,[d,"Apple"],[u,f]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i,/SHIELD Tablet/,/A500/,/LG-V410\/V41020c/,/Puffin/,/^(?!.*Mobile).*Android.*$/],[d,l,[u,f]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[l,[d,"Amazon"],[u,f]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[l,d,[u,p]],[/\((ip[honed|\s\w*]+);/i],[l,[d,"Apple"],[u,p]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[d,l,[u,p]],[/\(bb10;\s(\w+)/i],[l,[d,"BlackBerry"],[u,p]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[l,[d,"Asus"],[u,f]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[d,"Sony"],[l,"Xperia Tablet"],[u,f]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[d,"Sony"],[l,"Xperia Phone"],[u,p]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[d,l,[u,f]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[d,[l,/_/g," "],[u,p]],[/(nexus\s9)/i],[l,[d,"HTC"],[u,f]],[/(nexus\s6p)/i],[l,[d,"Huawei"],[u,p]],[/(microsoft);\s(lumia[\s\w]+)/i],[d,l,[u,p]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[d,"Microsoft"],[u,p]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[l,[d,"Motorola"],[u,p]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[l,[d,"Motorola"],[u,f]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[d,"Samsung"],l,[u,f]],[/smart-tv.+(samsung)/i],[d,[u,m],l],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[d,"Samsung"],l,[u,p]],[/sie-(\w+)*/i],[l,[d,"Siemens"],[u,p]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[d,"Nokia"],l,[u,p]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[l,[d,"Acer"],[u,f]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[d,"LG"],l,[u,f]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[l,[d,"LG"],[u,p]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[l,[d,"Lenovo"],[u,f]],[/linux;.+((jolla));/i],[d,l,[u,p]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[d,l,[u,p]],[/android.+;\s(pixel c)\s/i],[l,[d,"Google"],[u,f]],[/android.+;\s(pixel xl|pixel)\s/i],[l,[d,"Google"],[u,p]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i],[[l,/_/g," "],[d,"Xiaomi"],[u,p]],[/android.+a000(1)\s+build/i],[l,[d,"OnePlus"],[u,p]],[/\s(tablet)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[u,KAMPYLE_UTILS.lowerize],d,l],[/Mobile|iP(hone|od|ad)|(Android).*(Mobile|sdk)|BlackBerry|portalmmm|BOLT|Vodafone|WindowsCE|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/],[d,l,[u,p]]],h=e||navigator.userAgent,b=0;b<E.length&&!o;){var T=E[b],y=E[b+1];for(t=n=0;t<T.length&&!o;)if(o=T[t++].exec(h))for(i=0;i<y.length;i++)a=o[++n],r=y[i],typeof r===c&&r.length>0?2==r.length?typeof r[1]==s?g[r[0]]=r[1].call(g,a):g[r[0]]=r[1]:3==r.length?typeof r[1]!==s||r[1].exec&&r[1].test?g[r[0]]=a?a.replace(r[1],r[2]):void 0:g[r[0]]=a?r[1].call(g,a,r[2]):void 0:4==r.length&&(g[r[0]]=a?r[3].call(g,a.replace(r[1],r[2])):void 0):g[r]=a?a:void 0;b+=2}return!g[u]||g[u]!==p&&g[u]!==f?v:g[u]}};!function(){angular.module("nebUtils",[])}(),function(){angular.module("nebUtils").factory("Common",["$http","API_URLS","$rootScope","$q","$window","$sce","UserAgent",function(e,t,n,i,r,o,a){function s(e,t,n){for(var i=e,r=t.split("."),o=r.length,a=0;a<o-1;a++){var s=r[a];i[s]||(console.warn("The property "+s+" does not exist in the object "+e),i[s]={}),i=i[s]}i[r[o-1]]=n}function l(e,t){if(!e||!t)return!1;for(var n=t.split("."),i=e,r=0;r<n.length;r++){if(!i||void 0===i[n[r]])return null;i=i[n[r]]}return i}function c(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function u(){for(var e=8,t=c(),n=0;n<e-1;n++)t+="-"+c();return t}function d(){var e=Date.now();return window.performance&&"function"==typeof window.performance.now&&(e+=performance.now()),"xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx".replace(/[x]/g,function(){var t=(e+16*Math.random())%16|0;return e=Math.floor(e/16),t.toString(16)})}function p(e,t){return t=t||"",n.texts?l(n,e)||t:t}function f(){var e=a.getDeviceTypeByUserAgentAndOrientationEvent(navigator.userAgent);return e===DEVICE_TYPES.MOBILE||e===DEVICE_TYPES.TABLET}function m(e){try{return"object"==typeof e?e:JSON.parse(e)}catch(t){return console.warn("safeJsonParse function: cannot parse string"),null}}function v(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}function g(e){return e&&e.constructor===Array}function E(e,t,i){void 0===e&&(e="success"),void 0===i&&(i=""),n.addAlert(e,p(t,i))}function h(e,t){if(!e||!t)return null;for(var n=t.split("."),i=e,r=n.length,o=0;o<r;o++){if(!i||!i.hasOwnProperty(n[o])&&!i[n[o]])return null;i=i[n[o]]}return i}function b(e){return"[object Date]"===Object.prototype.toString.call(e)}function T(e){return"string"!=typeof e?e:e.toLowerCase()}function y(e){return""===e||null===e?null:"number"!=typeof e&&isNaN(Number(e))?null:Number(e)}function I(e){this.name=e+"=",this.ca=document.cookie.split(";");for(var t=0;t<this.ca.length;t++){for(this.c=this.ca[t];" "===this.c.charAt(0);)this.c=this.c.substring(1);if(0===this.c.indexOf(this.name)){var n=this.c.substring(this.name.length,this.c.length);return n}}return null}function D(e){e=e||{};var t=e.value,n=e.source||"var",i=e.type||"",r=e.name;if(void 0===t)switch(T(n)){case"var":t=h(window,r);break;case"url":t=F(r),""===t&&(t=null);break;case"cookie":t=I(r);break;default:t=null}if(null!==t)switch(i.toLowerCase()){case"datetime":t="string"==typeof t?parseInt(t)||null:t instanceof Date||t.getTime&&!isNaN(t.getTime())?t.getTime():null;break;case"number":t=y(t);break;case"text":"string"!=typeof t&&(t=null);break;case"boolean":"true"===t?t=!0:"false"===t&&(t=!1),"boolean"!=typeof t&&(t=null);break;default:t=null,console.error("Invalid custom parameter type "+i)}return t}function _(e){if("undefined"==typeof e||null===e)return!1;var t=document.createElement("textarea");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="2em",t.style.height="2em",t.style.padding="0",t.style.border="none",t.style.outline="none",t.style.boxShadow="none",t.style.background="transparent",t.value=e,document.body.appendChild(t),t.select();try{document.execCommand("copy")}catch(n){return console.log("Oops, unable to copy"),!1}return document.body.removeChild(t),!0}function A(e){return l(e,"settings.formMobileSettingsContract.formViewType")===MobileFormDisplayType.PARTIAL}function P(){return!document.hidden}function O(e){return e===FormComponents.CHECKBOX||e===FormComponents.RADIO||e===FormComponents.SELECT}function C(e){return e.reduce(function(e,t){return e.concat(Array.isArray(t)?C(t):t)},[])}var w=function(e){return angular.isObject(e.data)&&e.data.message?i.reject(e.data.message):i.reject("An unknown error occurred.")},R=function(e){return e.data},S=function(){var n=t.kampyleS3.getToolTips,i=e({method:"GET",url:n});return i.then(R,w)},L=function(){var n=t.kampyleS3.getTexts,i=e({method:"GET",url:n});return i.then(R,w)},M=function(){var e=r.navigator.userAgent,t={chrome:/chrome/i,safari:/safari/i,firefox:/firefox/i,ie:/internet explorer/i};for(var n in t)if(t[n].test(e))return n},N=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n].y;var i;if(t>0)for(var r=0;r<e.length;r++)i=e[r].y/t*100,e[r].percentage=i;return e},x=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n].y;var i,r=0;if(t>0)for(var o=0;o<e.length;o++){i=e[o].y/t*100;var a=Math.floor(Number(i));e[o].percentage=a,r+=a}for(var n=0;r<100&&n<e.length;n++,r++)e[n].percentage++;return e},F=function(e,t){void 0===t&&(t=location.href);var n="";if(t&&e){var i=t.substr(t.indexOf("?")+1);i=i.split("&");for(var r=0;r<i.length;r++){var o=i[r].split("=");o&&[o[0]]==e&&(n=o[1])}}return n},U=function(e,t){return e&&e.length>t&&(e=e.substring(0,t)+"..."),e},k=function(e){if(e.url){var t=e.url;if(e.params){t+="?";for(var n in e.params)t+=n+"="+e.params[n]+"&"}r.location.href=t}},B=function(e,t,n){var i=e.substr(e.length-1);return e="&"===i||"?"===i?e:e+"&",e+=t+"="+n},K=function(e,t){if(e&&e.length&&"object"==typeof t&&!angular.equals({},t)){e.indexOf("?")===-1&&(e+="?");for(var n in t)if(t[n]||0===t[n])if(t[n].constructor===Array)for(var i=t[n].length-1;i>=0;i--)e=B(e,n,t[n][i]);else e=B(e,n,t[n]);return e}},H=function(e){if(e){var t;return t=new RegExp("&lt","g"),e=e.replace(t,"<"),t=new RegExp("&gt","g"),e=e.replace(t,">"),o.trustAsHtml(e)}},V=function(e,t){if(!angular.isArray(e)||!e.length||!t&&0!==t)return e;var n=e.map(function(e){return e[t]});return n},G=function(){return"dev"===window.kplConfig.region&&!!window.kplConfig.serverPrefix&&""!==window.kplConfig.serverPrefix&&!!window.btoa;
},j=function(e){return e&&e.toLowerCase?e.toLowerCase():e},Y=function(e){if(e&&e.replace)return e.replace(/^\s*[\r\n]/gm,"").replace(/ /g,"").trim()},X=function(e,t){if(!e||!t)return!1;for(var n=t.split("."),i=e,r=0;r<n.length;r++){if(!i||!i.hasOwnProperty(n[r]))return!1;i=i[n[r]]}return!0},W=function(e,t){if(!angular.isArray(e)||!angular.isArray(t))return!1;for(var n=0;n<t.length;n++)if(e.indexOf(t[n])===-1)return!1;return!0},$=function(){var e=["<span>","{{CONTENT}}","&nbsp;",'<a href="#" ng-click="Common.openFilterModal($event)">{{HERE}}</a>',"</span>"].join(""),t=p("texts.app.pages.reports.errors.invalidRuleId","Filter set is invalid, please change configured filter");return e=e.replace("{{CONTENT}}",t),e=e.replace("{{HERE}}","here")},q=function(e){e.preventDefault(),n.$broadcast("openFilterModal")};return{getToolTips:S,getBrowser:M,getTexts:L,getSingleText:p,calcNpsPercentage:N,calcNpsPercentageAsNum:x,truncateText:U,getUrlParam:F,appendToUrl:K,doRedirect:k,htmlDecode:H,arrOfObjToArrOfString:V,isEmulatorServerActive:G,safeToLowerCase:j,formatUrlTextArea:Y,checkNestedProperty:X,getNestedProperty:l,setNestedProperty:s,generateUuid:u,isSubArray:W,setInvalidRuleText:$,openFilterModal:q,isMobile:f,safeJsonParse:m,toQueryString:v,isArray:g,addAlert:E,isObjectDate:b,isActiveTab:P,getSafeCustomParamVal:D,copyTextToClipboard:_,isMultiOptionComponent:O,isMobilePartialView:A,flatten:C,generateAlternativeUuid:d}}])}(),function(){function e(){function e(){return parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||!1}function t(){return!!e()}function n(){return e()>=9}function i(){return t()&&navigator.userAgent.toLowerCase().indexOf("ipad")>-1}function r(){return/iPhone|iPod/.test(navigator.userAgent)}function o(){return l()&&!r()&&void 0!==window.DeviceOrientationEvent}function a(){var e=window.navigator.userAgent,t=e.indexOf("MSIE "),n=0;t>0&&(n=parseInt(e.substring(t+5,e.indexOf(".",t)),10));var i=e.indexOf("Trident/");if(i>0){var r=e.indexOf("rv:");n=parseInt(e.substring(r+3,e.indexOf(".",r)),10)}var o=e.indexOf("Edge/");return o>0&&(n=parseInt(e.substring(o+5,e.indexOf(".",o)),10)),!!n}function s(){var e=window.navigator.userAgent.toLowerCase();return e.indexOf("firefox")>-1}function l(){var e=window.navigator.userAgent.toLowerCase();return e.indexOf("safari")>-1&&e.indexOf("chrome")===-1}function c(e){return o()?DEVICE_TYPES.TABLET:u(e)}function u(e){return"object"==typeof window.KAMPYLE_UTILS&&window.KAMPYLE_UTILS.getDeviceTypeByUserAgent?window.KAMPYLE_UTILS.getDeviceTypeByUserAgent(e):"desktop"}return{getIosVersion:e,isIos:t,isIpad:i,isIos9:n,isIphone:r,isIpadIos13:o,getDeviceTypeByUserAgentAndOrientationEvent:c,getDeviceTypeByUserAgent:u,isIE:a,isFirefox:s,isSafari:l}}angular.module("nebUtils").service("UserAgent",e)}(),function(){function e(e,t,n){function i(){return s}function r(){var n=t.defer();return s&&n.resolve(s),e.$on("NebProvisionsArrived",function(){n.resolve(s)}),n.promise}function o(t){s=t,e.$broadcast("NebProvisionsArrived")}function a(e){return!!s&&(s[e]===!0||"true"===s[e])}var s;return{getProvisions:i,getProvisionsAsync:r,setProvisions:o,checkProvision:a}}angular.module("nebProvision",[]).service("Provision",e),e.$inject=["$rootScope","$q","$injector"]}(),function(){function e(e){function t(t){var n,i=!!e.getProvisions();return i?(n=e.checkProvision(DigProvisions.LOCALIZED_FORMS),n&&t?DigClassNamePrefix.FORM_LANGUAGE+t:null):void 0}return{getClassNameByFormLanguage:t}}angular.module("nebLocalization",[]).service("Localization",e),e.$inject=["Provision"]}(),function(e,t){e.app=angular.module("inviteApp",["ui.bootstrap","nebProvision","nebUtils","nebLocalization"]),app.constant("API_URLS",{}).config(["$httpProvider",function(e){e.defaults.useXDomain=!0,delete e.defaults.headers.common["X-Requested-With"]}]),app.config(["$sceDelegateProvider",function(e){e.resourceUrlWhitelist(["self",kplConfig.prefix+"**"]),e.resourceUrlBlacklist([])}])}(window,document),function(e,t){function n(n,i,r,o,a,s,l,c){function u(e){var t=location.search.substr(location.search.indexOf("?")+1),n="";t=t.split("&");for(var i=0;i<t.length;i++){var r=t[i].split("=");r&&[r[0]]==e&&(n=r[1])}return n}function d(e){if(e)for(var t=e.length,n=0;n<t;n++)e[n].classList.add("neb-wcag")}function p(t){e.opener?e.opener.postMessage(JSON.stringify(t),"*"):e.parent!==e.top?e.parent.postMessage(JSON.stringify(t),"*"):e.top!==e.self?top.window.postMessage(JSON.stringify(t),"*"):e.postMessage(JSON.stringify(t),"*")}function f(e,t){var n={formId:i.formData.formId,action:e};for(var r in t)n[r]=t[r];p(n)}function m(){a(function(){i.inviteShown=!0},0,!0)}function v(e){a(function(){setTimeout(function(){var e=t.querySelector(".web-mobile-invitation"),n=e?e.offsetHeight:null;i.sendMessage("inviteHeightChanged",{newHeight:n})},200)})}function g(){var e=t.querySelectorAll(".invitationContentText, .invitation-title");i.isWCAG&&e[0]&&e[0].focus&&(e[0].tabIndex=-1,e[0].focus())}function E(){var e=t.querySelector("#kplProvideButton");e&&e.focus()}i.invitationeData={},i.formData={},i.innerInviteUrl="",i.checkEscPressed=function(e){27===e.keyCode&&i.inviteDeclined()},i.getNewMobileInviteVersion=function(){return i.formData.mobileDesign?1:-1},i.initCtrl=function(){if(i.invitationData={deviceType:null},i.isMobile=l.isMobile(),o.addEventListener("message",i.handleMessageEvents,!1),o.addEventListener("keyup",i.checkEscPressed),!s.checkProvision("separateFormTemplateFromData")){var t=l.getNestedProperty(e,"kplConfig.invitationJson")||{};i.setInviteData(t)}f("inviteLoaded",{inviteVersion:i.getNewMobileInviteVersion()})},i.initWcag=function(){i.isWCAG=!!u("isWCAG"),i.isWCAG&&(d(t.querySelectorAll("[tabindex]")),d(t.querySelectorAll(".btnDiv button")),g())},i.sendMessage=f,i.showInviteContent=function(){return"kma"===i.context||i.inviteShown},i.getWindowOrientation=function(){return o.orientation},i.bindOrientationEvent=function(){angular.element(o).bind("orientationchange",v)},i.unBindInviteEvents=function(){angular.element(o).unbind("orientationchange",v)},i.isNewMobileInvite=function(e,t){return!(!e||!t)&&(t&&"desktop"!==e&&!!i.formData.mobileDesign)},i.getInnerInvitePartialUrl=function(e){var t=n.app||kplConfig,i=e?"innerMobileInvitePartial.html":"innerInvitePartial.html";return""+t.prefix+t.onsitePrefix+"templates/"+i},i.handleMessageEvents=function(e){var t,n;if(!e||!e.data||"string"!=typeof e.data)return!1;try{t=JSON.parse(e.data)}catch(r){t={}}switch(n=t.data||{},t.action){case"inviteShown":m();break;case"setExtraData":i.websiteId=n.websiteId||null;var o=n.provisions,c=n.deviceType,u=n.customCssUpload;if(o&&(s.setProvisions(o),l.setNestedProperty(i,"isCustomCssAvailable",s.checkProvision(DigProvisions.CUSTOM_CSS_UPLOAD)&&u)),s.checkProvision("separateFormTemplateFromData")){var d=Object.assign(l.getNestedProperty(n,"inviteData")||{},{formLanguage:l.getNestedProperty(n,"formLanguage")});i.setInviteData(d)}if(c){var p=i.isNewMobileInvite(c,s.checkProvision("mobileInvitationLayout"));p?(i.bindOrientationEvent(),i.formData=Object.assign({},i.formData,i.formData.mobileDesign),i.formData.position=n.position||"top"):i.formData=Object.assign({},i.formData,i.formData.desktopDesign),i.formData.deviceType=c,i.innerInviteUrl=i.getInnerInvitePartialUrl(p)}a(i.initWcag,300)}},i.htmlDecode=function(e){if(e){var t;return t=new RegExp("&lt","g"),e=e.replace(t,"<"),t=new RegExp("&gt","g"),e=e.replace(t,">"),r.trustAsHtml(e)}},i.inviteAccepted=function(e){i.unBindInviteEvents(),f("inviteAccepted",{formId:i.invitationJson.formId}),e.preventDefault(),e.stopPropagation()},i.inviteDeclined=function(e){E(),f("inviteDeclined",{formId:i.invitationJson.formId})},i.inviteDefered=function(e){i.unBindInviteEvents(),E(),f("inviteDefered",{formId:i.invitationJson.formId}),e.preventDefault(),e.stopPropagation()},i.wireGlobalEvents=function(){e.inviteAccepted=i.inviteAccepted,e.inviteDeclined=i.inviteDeclined,e.inviteDefered=i.inviteDefered;var n=angular.element(t.querySelector("#kplProvideButton"));n&&(n.bind("click",e.inviteAccepted),n.bind("touchend",e.inviteAccepted)),n=angular.element(t.querySelector("#kplDeclineButton")),n&&(n.bind("click",e.inviteDeclined),n.bind("touchend",e.inviteDeclined)),n=angular.element(t.querySelector("#kplDeferButton")),n&&(n.bind("click",e.inviteDefered),n.bind("touchend",e.inviteDefered))},i.setInviteData=function(e){void 0===e&&(e={}),i.formData=i.invitationJson=e||{}},i.setFormLanguageClasses=function(){var e=l.getNestedProperty(i,"formData.formLanguage");return c.getClassNameByFormLanguage(e)},i.initCtrl()}angular.module("inviteApp").controller("inviteMainCtrl",n),n.$inject=["$rootScope","$scope","$sce","$window","$timeout","Provision","Common","Localization"]}(window,document),angular.module("inviteApp").run(["$templateCache",function(e){e.put("https://nebula-cdn.kampyle.com/resources/onsite/templates/formExample.html",'<!DOCTYPE html>\n<!--\nTo change this license header, choose License Headers in Project Properties.\nTo change this template file, choose Tools | Templates\nand open the template in the editor.\n-->\n<html>\n    <head>\n        <title>test for form</title>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n        <script type="text/javascript">\n            \n            function test(){\n               window.postMessage(\'{"action":"inviteAccepted"}\', document.referrer);//when the the user click accept \n               window.postMessage(\'{"action":"inviteDeclined"}\', document.referrer);//when the user click decline\n               window.postMessage(\'{"action":"inviteDefered"}\', document.referrer);//when the user click defer\n            }\n        </script>\n    </head>\n    <body>\n        <button onclick="test();">clickme</button>\n    </body>\n</html>\n'),e.put("https://nebula-cdn.kampyle.com/resources/onsite/templates/innerInvitePartial.html",'  <div class="invitationDesignMain" ng-controller="innerInvitePartialCtrl" ng-style="setInviteStyle()" ng-class="{mobileAdapter:isMobile}" ng-init="initElement()" ng-show="showInviteContent()">\n  <h1 class="hide">Invitation to provide feedback</h1>\n  <div class="kpl-invitation-content" ng-style="setContentStyle()">\n    <button\n      id="kplDeferButton"\n      neb-tab-boundary="first"\n      class="xDix"\n      tabindex="0"\n      role="button"\n      ng-keypress="handleXPressed($event)"\n      aria-label="close">\n      x\n    </button>\n    <div class="imageContainer">\n      <img ng-if="showInviteImage() " ng-src="{{formData.logoUrl.url}}" class="invitationDesignImg">\n      <div ng-if="!showInviteImage() && context === \'kma\'" class="invitationDesignImg invitationDesignImgPlaceholder"></div>\n    </div>\n\n    <div class="invitationHeadlineParent margin-top-20 padding-left-10 padding-right-10" ng-class="{\'margin-bottom-46\' : formData.invitationContentText}">\n      <div ng-if="!formData.invitationContentText">\n        <div class="invitationHeadline" id="invitationHeadlineWysiwyg" ng-bind-html="htmlDecode(formData.invitationHeadline)"></div>\n        <div ng-if="formData.invitationText" class="invitationText">\n            {{formData.invitationText}}\n        </div>\n      </div>\n      <div ng-if="formData.invitationContentText">\n        <div class="invitationContentText" ng-bind-html="htmlDecode(formData.invitationContentText)"></div>\n      </div>\n\n    </div>\n    <div class="btnDiv">\n      <div class="declineButtonLi">\n        <div class="declineButtonTextDiv">\n          <button id="kplDeclineButton"\n                  type="button"\n                  role="button"\n                  ng-mouseenter="setButtonHover($event)"\n                  ng-mouseleave="resetButtonHover($event)"\n                  class="btn btn-wide btn-default defHeight no-border"\n                  ng-style="{\'background-color\': formData.invitationDeclineButtonColor,\'color\': formData.invitationDeclineButtonTextColor}">\n              {{formData.declineButtonText}}\n          </button>\n        </div>\n      </div>\n      <div class="provideButtonLi">\n        <div class="provideButtonTextDiv">\n            <button\n              id="kplProvideButton"\n              name="provideButtonText"\n              type="button"\n              role="button"\n              ng-init="wireGlobalEvents()"\n              ng-mouseenter="setButtonHover($event)"\n              ng-mouseleave="resetButtonHover($event)"\n              class="btn btn-wide btn-primary defHeight no-border"\n              ng-style="{\'background-color\': formData.invitationProvideButtonColor,\'color\': formData.invitationProvideButtonTextColor}">\n              {{formData.provideButtonText}}\n            </button>\n        </div>\n      </div>\n    </div>\n  </div>\n\n\n  <div class="footerCls">\n    <span class="btnText">{{texts.app.pages.forms.invitation.designTab.poweredByKampyle || \'Powered By\'}}</span>\n    <a target="_blank" href="http://www.medallia.com" tabindex="0">\n      <img ng-src="{{prefix + \'assets/images/kampyle/CommandCenterInvitationLogo.svg\'}}" alt="Link to Medallia Website" class="footerImg">\n    </a>\n\n    <i tabindex="0" class="fa fa-question-circle kpl-tooltip kpl-invitation-tooltip pull-left"\n       tooltip="{{formData.helpTooltipText || \'\'}}" tooltip-placement="right"\n       tooltip-trigger="mouseenter mouseleave focus blur"\n       neb-tab-boundary="last"\n       aria-label={{formData.helpTooltipText}}>\n    </i>\n  </div>\n</div>\n'),e.put("https://nebula-cdn.kampyle.com/resources/onsite/templates/innerMobileInvitePartial.html",'<div\n  class="web-mobile-invitation"\n  ng-style="setInviteStyle()"\n  ng-init="initElement()" ng-show="showInviteContent()"\n  neb-inner-mobile-partial\n  ng-class="setContainerClasses()"\n  ng-controller="innerMobileInvitePatialCtrl">\n  <div>\n    <div class="mobile-invite-close-btn" id="kplDeferButton" tabindex="5" role="button" ng-keypress="handleXPressed($event)" aria-label="close">&times;</div>\n    <div class="invitation-container">\n      <div class="invitation-content">\n        <h2 class="invitation-title" ng-bind="formData.invitationHeadline"></h2>\n        <div class="invitation-body">\n          {{ formData.invitationText }}\n        </div>\n      </div>\n      <div class="provide-feedback-button">\n        <button\n          id="kplProvideButton"\n          name="provideButtonText"\n          type="button"\n          tabindex="1"\n          role="button"\n          ng-init="wireGlobalEvents()"\n          ng-mouseenter="setButtonHover($event)"\n          ng-mouseleave="resetButtonHover($event)"\n          ng-style="{\'background-color\': formData.invitationProvideButtonColor,\'color\': formData.invitationProvideButtonTextColor}">\n          {{ formData.provideButtonText }}\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n'),e.put("https://nebula-cdn.kampyle.com/resources/onsite/templates/inviteExample.html",'<!DOCTYPE html>\n<!--\nTo change this license header, choose License Headers in Project Properties.\nTo change this template file, choose Tools | Templates\nand open the template in the editor.\n-->\n<html>\n    <head>\n        <title>test for invite</title>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n        <script type="text/javascript">\n            \n            function test(){\n               parent.window.postMessage(\'this is an invite\', document.referrer); \n            }\n        </script>\n    </head>\n    <body>\n        <button onclick="test();">clickme</button>\n    </body>\n</html>\n'),e.put("https://nebula-cdn.kampyle.com/resources/onsite/templates/inviteTemplate.html",'<!DOCTYPE html>\n<html lang="en" ng-app="inviteApp">\n  <head>\n    <!--https://cdn-prod.kampyle.com/-->\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">\n\n\n\t\t<!-- build:cssVendor assets/css/liveform-vendor.css -->\n\t\t<link rel="stylesheet" href="/****URL_PREFIX****/resources/onsite/css/bootstrap.min.css" />\n\t\t<!-- GoogleApis open-sans -->\n\t\t<link rel=\'stylesheet\' href=\'/****URL_PREFIX****/resources/form/FormBuilder/vendor/fonts-googleapis/css/open-sans-v14.css\' type=\'text/css\'>\n\t\t<!-- Font Awesome -->\n\t\t<link rel="stylesheet" href="/****URL_PREFIX****/resources/form/FormBuilder/vendor/fontawesome/css/font-awesome.min.css" />\n\t\t<!-- endbuild -->\n\n    <!-- build:cssApp assets/css/kampyle/invite-style.css -->\n    <link rel="stylesheet" href="/****URL_PREFIX****/resources/onsite/css/styles.css" />\n    <link rel="stylesheet" href="/****URL_PREFIX****/resources/onsite/css/targeting.css"/>\n    <!-- endbuild -->\n\n    <title>Invitation to provide feedback</title>\n  </head>\n  <body ng-controller="inviteMainCtrl" role="dialog" ng-class="::setFormLanguageClasses()">\n    <div role="document" class="neb-invite-container" ng-include="innerInviteUrl"></div>\n    <link\n\t\t\trel="stylesheet"\n\t\t\tproperty="stylesheet"\n\t\t\tng-if="invitationJson.customCssUrl || invitationJson.desktopDesign.customCssFileResource.url"\n\t\t\tng-href="{{isCustomCssAvailable ? invitationJson.desktopDesign.customCssFileResource.url : invitationJson.customCssUrl}}"/>\n\n    <script>\n      var kplConfig = {\n        prefix: \'/****URL_PREFIX****/\',\n        onsitePrefix: \'resources/onsite/\',\n        resourcesPrefix: \'resources/form/FormBuilder/\',\n        invitationJson: /****INVITATION_JSON****/,\n      };\n\n    </script>\n\n\n    <!-- build:jsVendor assets/js/invite-vendor.js -->\n    <script src="/****URL_PREFIX****/resources/dist//****URL_PREFIX****/resources/onsite/js/angular.min.js"></script>\n    <script src="/****URL_PREFIX****/resources/dist//****URL_PREFIX****/resources/onsite/js/ui-bootstrap-tpls-0.12.1.min.js"></script>\n    <script src="/****URL_PREFIX****/resources/dist//****URL_PREFIX****/resources/onsite/js/angular-aria.min.js"></script>\n    <!-- endbuild -->\n\n    <!-- build:jsApp assets/js/invite-app.js -->\n    <script src="/****URL_PREFIX****/resources/dist//****URL_PREFIX****/nebula/config/enums.js"></script>\n    <script src="/****URL_PREFIX****/resources/dist//****URL_PREFIX****/resources/onsite/modules/KAMPYLE_POLYFILLS.js"></script>\n    <script src="/****URL_PREFIX****/resources/dist//****URL_PREFIX****/resources/onsite/modules/KAMPYLE_UTILS.js"></script>\n    <script src="/****URL_PREFIX****/resources/dist//****URL_PREFIX****/resources/services/neb-util/neb-utils.module.js"></script>\n    <script src="/****URL_PREFIX****/resources/dist//****URL_PREFIX****/resources/services/neb-util/common.service.js"></script>\n    <script src="/****URL_PREFIX****/resources/dist//****URL_PREFIX****/resources/services/neb-util/userAgent.service.js"></script>\n    <script src="/****URL_PREFIX****/resources/dist//****URL_PREFIX****/resources/services/neb-provision/neb-provision.js"></script>\n    <script src="/****URL_PREFIX****/resources/dist//****URL_PREFIX****/resources/services/neb-localization/neb-localization.js"></script>\n    <script src="/****URL_PREFIX****/resources/dist//****URL_PREFIX****/resources/onsite/js/invite.module.js"></script>\n    <script src="/****URL_PREFIX****/resources/dist//****URL_PREFIX****/resources/onsite/js/inviteMain.controller.js"></script>\n    <script src="/****URL_PREFIX****/resources/dist//****URL_PREFIX****/resources/onsite/js/templates.js"></script>\n    <script src="/****URL_PREFIX****/resources/dist//****URL_PREFIX****/resources/onsite/js/innerInvitePartialCtrl.js"></script>\n    <script src="/****URL_PREFIX****/resources/dist//****URL_PREFIX****/resources/onsite/js/innerMobileInvitePatialCtrl.js"></script>\n    <script src="/****URL_PREFIX****/resources/dist//****URL_PREFIX****/resources/form/FormBuilder/assets/js/directives/neb-tab-boundary.js"></script>\n    <!-- endbuild -->\n\n  </body>\n</html>\n'),e.put("https://nebula-cdn.kampyle.com/resources/onsite/templates/inviteTemplateReact.html",'<!DOCTYPE html>\n<html lang="en">\n<head>\n\t<!--https://cdn-prod.kampyle.com/-->\n\t<meta charset="UTF-8">\n\t<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">\n\n\n\t<!-- build:cssVendor assets/css/liveform-vendor.css -->\n\t<link rel="stylesheet" href="/****URL_PREFIX****/resources/onsite/css/bootstrap.min.css" />\n\t<link rel="stylesheet" href="/****URL_PREFIX****/node_modules/@mdigital/invite/dist/index.css" />\n\t<!-- GoogleApis open-sans -->\n\t<link rel=\'stylesheet\' href=\'/****URL_PREFIX****/resources/form/FormBuilder/vendor/fonts-googleapis/css/open-sans-v14.css\' type=\'text/css\'>\n\t<!-- Font Awesome -->\n\t<link rel="stylesheet" href="/****URL_PREFIX****/resources/form/FormBuilder/vendor/fontawesome/css/font-awesome.min.css" />\n\t<!-- endbuild -->\n\n\t<!-- build:cssApp assets/css/kampyle/invite-style.css -->\n\t<link rel="stylesheet" href="/****URL_PREFIX****/resources/onsite/css/styles.css" />\n\t<link rel="stylesheet" href="/****URL_PREFIX****/resources/onsite/css/targeting.css"/>\n\t<!-- endbuild -->\n\n\t<title>Invitation to provide feedback</title>\n</head>\n<body>\n\t<script>\n\t\t\tvar kplConfig = window.kplConfig = {\n\t\t\t\tprefix: \'/****URL_PREFIX****/\',\n\t\t\t\tonsitePrefix: \'resources/onsite/\',\n\t\t\t\tresourcesPrefix: \'resources/form/FormBuilder/\'\n\t\t\t};\n\n\t\t</script>\n\t<span id="invitationApp"></span>\n\t<!-- build:jsApp assets/js/invite-react-app.js -->\n\t<script src="/****URL_PREFIX****/resources/dist//****URL_PREFIX****/node_modules/@mdigital/invite/dist/index.js"></script>\n\t<!-- endbuild -->\n\n\n</body>\n</html>\n'),e.put("https://nebula-cdn.kampyle.com/resources/onsite/templates/userEmbedExample.html",'<!DOCTYPE html>\n<!--\nTo change this license header, choose License Headers in Project Properties.\nTo change this template file, choose Tools | Templates\nand open the template in the editor.\n-->\n<html>\n    <head>\n        <title>Test for Embed</title>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n        <script type="text/javascript">\n            var KAMPYLE_FUNC = {\n                testpost: function (e){\n                    debugger;\n                },\n                init: function(){\n                   \n                },\n                addListener: function(){\n                     document.getElementById(\'inviteWindow\').addEventListener("inviteWindow", this.testpost, false);\n                }\n            };\n            window.addEventListener("message", receiveMessageInv, false);\n            //window.addEventListener("formWindow", receiveMessageForm, false);\n            function receiveMessageInv(e){\n                debugger;\n            }\n            function receiveMessageForm(e){\n                debugger;\n            }\n            KAMPYLE_FUNC.init();\n            \n        </script>\n    </head>\n    <body>\n        <div>TODO write content</div>\n        <iframe src="http://cdn.dev.kampyle.com.s3.amazonaws.com/inviteExample.html" id="inviteWindow" ></iframe>\n        <iframe src="http://cdn.dev.kampyle.com.s3.amazonaws.com/formExample.html" id="formWindow" ></iframe>\n    </body>\n</html>\n')}]),function(e,t){function n(t,n,i,r,o,a){function s(e,t){return t.indexOf(e)>-1}t.prefix=""+kplConfig.prefix+kplConfig.resourcesPrefix,t.initContext=function(e){t.context=e},t.handleXPressed=function(e){13==e.keyCode&&e.target.click()},t.setContentStyle=function(){var n,i={overflowY:"auto"};return!t.isMobile&&t.formData&&t.formData.vertical?(n=t.formData.vertical-60,i.height=n+"px"):(n=e.screen.availHeight-60,i.height=n+"px"),i},t.geInviteFooterStyle=function(e){if(!e)return{};var i=t.websiteId||n.currentWebSiteId||null,r={visibility:s(i,e)?"hidden":"visible"};return r},t.showInviteContent=function(){return"kma"===t.context||t.inviteShown},t.showInviteImage=function(){return!!t.formData&&!!t.formData.logoUrl&&!!t.formData.logoUrl.url&&"http://"!==t.formData.logoUrl.url},t.htmlDecode=function(e){if(e){var t;return t=new RegExp("&lt","g"),e=e.replace(t,"<"),t=new RegExp("&gt","g"),e=e.replace(t,">"),i.trustAsHtml(e)}},t.setInviteStyle=function(){var e={};return t.formData&&(t.formData.invitationBackgroundColor&&(e["background-color"]=t.formData.invitationBackgroundColor),t.formData.horizontal&&!t.isMobile&&(e.width=t.formData.horizontal,e["max-width"]=t.formData.horizontal),t.formData.vertical&&!t.isMobile&&(e.height=t.formData.vertical)),e},t.setButtonHover=function(e){if(e.target){var n=angular.element(e.target);if(n&&n[0].id){var i=void 0,r=void 0;"kplProvideButton"===n[0].id?(i=t.formData.invitationProvideButtonTextColor,r=t.formData.invitationProvideButtonColor):(i=t.formData.invitationDeclineButtonTextColor,r=t.formData.invitationDeclineButtonColor),n.removeClass("btn-primary"),n.css({opacity:.8,background:r,color:i})}}},t.resetButtonHover=function(e){if(e.target){var t=angular.element(e.target);t&&t[0].id&&(t.css("opacity",1),t.addClass("btn-primary"))}}}app.controller("innerInvitePartialCtrl",n),n.$inject=["$scope","$rootScope","$sce","$interval","$window","$timeout"]}(window,document),function(e,t){function n(t){function n(){var t=Number(e.orientation);return Math.abs(t)?"landscape":"portrait"}t.setContainerClasses=function(){var e={top:!1,bottom:!1,landscape:!1,portrait:!1,tablet:!1,mobile:!1};return e.landscape="landscape"===n(),e.portrait="portrait"===n(),t.formData=t.formData||{deviceType:"mobile",position:"top"},e[t.formData.position]=!0,e[t.formData.deviceType]=!0,e},t.setInviteStyle=function(){var e={};return t.formData&&t.formData.invitationBackgroundColor&&(e["background-color"]=t.formData.invitationBackgroundColor),e}}function i(e,t){var n=this;n.timeoutHeightCheck=function(t){var i=t.element,r=t.mobileInviteCurrentHeight,o=t.heightPollCounter;e(function(){n.pollElementHeight({element:i,mobileInviteCurrentHeight:r,heightPollCounter:o})},200)},n.pollElementHeight=function(e){var i=e.element,r=(e.mobileInviteCurrentHeight,e.heightPollCounter),o=i[0].offsetHeight;r<30&&(r+=1,n.timeoutHeightCheck({element:i,mobileInviteCurrentHeight:o,heightPollCounter:r})),t.sendMessage("inviteHeightChanged",{newHeight:o})}}function r(e){return{restrict:"A",controller:"nebInnerMobilePartialDirectiveCtrl",controllerAs:"$ctrl",bindToController:!0,link:function(e,t,n,i){var r=0,o=0;i.pollElementHeight({element:t,mobileInviteCurrentHeight:r,heightPollCounter:o})}}}app.controller("innerMobileInvitePatialCtrl",n),n.$inject=["$scope"],i.$inject=["$timeout","$scope"],app.controller("nebInnerMobilePartialDirectiveCtrl",i).directive("nebInnerMobilePartial",r),r.$inject=["$timeout"]}(window,document),function(){function e(e){e.preventDefault(),e.stopPropagation()}var t=function(){function t(){this.link=function(t,n,i){n.on("keydown",function(t){9===(t.which||t.keyCode)&&("first"===i.nebTabBoundary&&t.shiftKey&&(e(t),document.querySelector('[neb-tab-boundary="last"]').focus()),"last"!==i.nebTabBoundary||t.shiftKey||(e(t),document.querySelector('[neb-tab-boundary="first"]').focus()))})}}return t}();app.directive("nebTabBoundary",[function(){return new t}])}();